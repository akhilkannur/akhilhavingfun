---
interface Props {
  title: string;
  description: string;
  image?: string;
  type?: 'website' | 'article';
  publishedTime?: string;
}

const { 
  title, 
  description, 
  image = 'https://akhilhaving.fun/DP.jpg',
  type = 'website',
  publishedTime
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, 'https://akhilhaving.fun');
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content={description}>
    <title>{title}</title>
    <link rel="icon" href="/DP.jpg" type="image/jpeg">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content={type}>
    <meta property="og:url" content={canonicalURL.href}>
    <meta property="og:title" content={title}>
    <meta property="og:description" content={description}>
    <meta property="og:image" content={image}>

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content={canonicalURL.href}>
    <meta property="twitter:title" content={title}>
    <meta property="twitter:description" content={description}>
    <meta property="twitter:image" content={image}>
    
    {publishedTime && <meta property="article:published_time" content={publishedTime}>}
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JY27M7VW7W"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-JY27M7VW7W');
    </script>
    
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="animated-background"></div>
    <div class="container">
        <header class="header">
            <div class="header-info">
                <div id="countdown-timer" class="countdown-style"></div>
                <div id="fact-flicker" class="fact-flicker-style"></div>
            </div>
        </header>

        <main>
            <slot />
        </main>

        <footer>
            <p class="copyright">&copy; 2026 Akhil MK. Homepage Inspired by <a href="https://mhouge.dk/" target="_blank">mhouge.dk</a></p>
        </footer>
    </div>
    <script>
        function updateCountdown() {
            const now = new Date();
            const endOfYear = new Date(2026, 11, 31, 23, 59, 59);

            const startOfYear = new Date(2026, 0, 1, 0, 0, 0);
            const totalMillisecondsInYear = endOfYear.getTime() - startOfYear.getTime();
            const millisecondsRemaining = endOfYear.getTime() - now.getTime();

            if (millisecondsRemaining <= 0) {
                document.getElementById('countdown-timer').innerText = "0% left of 2026";
                return;
            }

            const percentageLeft = (millisecondsRemaining / totalMillisecondsInYear) * 100;
            document.getElementById('countdown-timer').innerText = `${percentageLeft.toFixed(2)}% left of 2026`;
        }

        updateCountdown();
        setInterval(updateCountdown, 1000);

        document.addEventListener('DOMContentLoaded', function() {
            const factFlicker = document.getElementById('fact-flicker');
            if (factFlicker) {
                const facts = [
                    "Did you know? 'First Principles Thinking' means breaking down problems to their fundamental truths, then building up from there.",
                    "Did you know? 'Inversion' is solving a problem by considering the opposite: what would guarantee failure, then avoiding it.",
                    "Did you know? 'Occam's Razor' suggests the simplest explanation is usually the best one.",
                    "Did you know? 'The Map Is Not The Territory' reminds us that our models of reality are not reality itself.",
                    "Did you know? 'Compounding' isn't just for money; small, consistent efforts yield massive results over time.",
                    "Did you know? 'Circle of Competence' means knowing what you know, and more importantly, what you don't know.",
                    "Did you know? 'Margin of Safety' is building in a buffer to protect against unforeseen events or errors.",
                    "Did you know? 'Hanlon's Razor' suggests never attributing to malice that which is adequately explained by stupidity.",
                    "Did you know? 'The Law of Unintended Consequences' states that actions often have effects not foreseen or intended.",
                    "Did you know? 'Feedback Loops' are processes where outputs are routed back as inputs, influencing future outputs.",
                    "Did you know? 'Survivorship Bias' is focusing only on things that survived, overlooking those that failed.",
                    "Did you know? 'Opportunity Cost' is the value of the next best alternative that was not taken.",
                    "Did you know? 'The Pareto Principle' (80/20 rule) states that roughly 80% of effects come from 20% of causes."
                ];
                let currentFactIndex = 0;

                function updateFactFlicker() {
                    factFlicker.style.opacity = 0;
                    setTimeout(() => {
                        factFlicker.innerText = facts[currentFactIndex];
                        currentFactIndex = (currentFactIndex + 1) % facts.length;
                        factFlicker.style.opacity = 1;
                    }, 500);
                }

                updateFactFlicker();
                setInterval(updateFactFlicker, 10000);
            }
        });
    </script>
    <script src="/confetti.js" is:inline></script>
    <script async src="https://heyo.so/embed/script?projectId=68b66e4679c04bc3521fbc5b"></script>
</body>
</html>
